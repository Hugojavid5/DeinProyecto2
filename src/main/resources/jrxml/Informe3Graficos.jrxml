<!-- Created with Jaspersoft Studio version 7.0.1.final using JasperReports Library version 7.0.1-573496633c2b4074e32f433154b543003f7d2498  -->
<jasperReport name="Informe3Graficos" language="java" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="44b1c194-c289-4db3-9e4a-c131c4f27638">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="134"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="861"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MariadbDein"/>
	<parameter name="IMAGE_PATH" class="java.lang.String"/>
	<parameter name="SUBINFORME_PATH" class="java.lang.String"/>
	<query language="SQL"><![CDATA[SELECT 
    libros.`Libro`.codigo  AS libro_id, 
    libros.`Libro`.titulo  AS titulo_libro,
    COUNT( libros.`Historico_prestamo`.codigo_libro ) AS veces_prestado,
    COUNT(DISTINCT libros.`Historico_prestamo`.dni_alumno ) AS alumnos_distintos
FROM 
    libros.`Libro` 
LEFT JOIN 
    libros.`Historico_prestamo`   ON  libros.`Libro`.codigo  =  libros.`Historico_prestamo`.codigo_libro 
GROUP BY 
    libros.`Libro`.codigo 
ORDER BY 
    veces_prestado DESC]]></query>
	<field name="libro_id" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="codigo"/>
		<property name="com.jaspersoft.studio.field.label" value="libro_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="Libro"/>
	</field>
	<field name="titulo_libro" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="titulo"/>
		<property name="com.jaspersoft.studio.field.label" value="titulo_libro"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="Libro"/>
	</field>
	<field name="veces_prestado" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="veces_prestado"/>
		<property name="com.jaspersoft.studio.field.label" value="veces_prestado"/>
	</field>
	<field name="alumnos_distintos" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="alumnos_distintos"/>
		<property name="com.jaspersoft.studio.field.label" value="alumnos_distintos"/>
	</field>
	<background splitType="Stretch"/>
	<title height="696" splitType="Stretch">
		<element kind="staticText" uuid="fd854ddc-e3f9-4cac-a368-60282b3e73f9" mode="Opaque" x="0" y="0" width="550" height="80" forecolor="#E0FF00" backcolor="#050000" fontSize="40.0" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[Informe Graficos]]></text>
		</element>
		<element kind="staticText" uuid="fc8c725c-c33c-4503-b7e2-fbccb90e4e83" mode="Opaque" x="80" y="80" width="390" height="80" forecolor="#E0FF00" backcolor="#050000" fontSize="40.0" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[BiblioRusty]]></text>
		</element>
		<element kind="image" uuid="a00fda56-4ad9-40a6-963a-de695bf51156" x="0" y="80" width="80" height="80">
			<expression><![CDATA[$P{IMAGE_PATH}+"biblioteca.png"]]></expression>
		</element>
		<element kind="staticText" uuid="5338555f-1088-4a07-97d1-d0fe305b6540" mode="Opaque" x="0" y="160" width="550" height="30" forecolor="#E0FF00" backcolor="#050000" fontSize="20.0" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[Prestaciones de libro por libro]]></text>
		</element>
		<element kind="staticText" uuid="511d3604-4afb-4930-9c71-35805e3ea60c" mode="Opaque" x="2" y="310" width="550" height="30" forecolor="#E0FF00" backcolor="#050000" fontSize="20.0" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[Estados de los libros]]></text>
		</element>
		<element kind="subreport" uuid="3f9b4645-5c64-4b65-8d02-47c4d9a0fa69" x="2" y="190" width="547" height="50">
			<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
			<expression><![CDATA[$P{SUBINFORME_PATH}+"Subinforme3_1Graficos.jasper"]]></expression>
		</element>
		<element kind="subreport" uuid="43ac652f-3b0f-4ce1-a3c7-e71753c693e0" x="2" y="340" width="550" height="53">
			<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
			<expression><![CDATA[$P{SUBINFORME_PATH}+"Subinforme3_2Graficos.jasper"]]></expression>
		</element>
		<element kind="image" uuid="3506b3e1-c45e-48e8-b28f-91fc4c5a8fdd" x="470" y="80" width="80" height="80">
			<expression><![CDATA[$P{IMAGE_PATH}+"biblioteca.png"]]></expression>
		</element>
		<element kind="staticText" uuid="ffa78914-b857-4465-ae88-06484cfb3b42" mode="Opaque" x="5" y="490" width="550" height="30" forecolor="#E0FF00" backcolor="#050000" fontSize="20.0" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[Numero de libros, y de alumnos]]></text>
		</element>
		<element kind="subreport" uuid="4d9b5c13-4a88-463c-a0b4-4c0e220a3d1c" x="5" y="520" width="550" height="67">
			<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
			<expression><![CDATA[$P{SUBINFORME_PATH}+"Subinforme3_3Graficos.jasper"]]></expression>
		</element>
	</title>
	<pageHeader height="37" splitType="Stretch"/>
	<pageFooter height="44" splitType="Stretch">
		<element kind="textField" uuid="f0861610-0571-4e7e-9e66-1226e4c87313" x="0" y="24" width="230" height="15" pattern="EEEE, d 'de' MMMM 'del' yyyy">
			<expression><![CDATA[new java.util.Date()]]></expression>
		</element>
		<element kind="textField" uuid="9aea5cb3-e4ad-4a9b-a9d9-381cc3cb3999" x="370" y="10" width="100" height="30" hTextAlign="Right" vTextAlign="Middle">
			<expression><![CDATA["PÃ¡gina "+$V{PAGE_NUMBER}+" /"]]></expression>
		</element>
		<element kind="textField" uuid="4e6e7ce7-4089-4597-953a-f489be721fe2" x="470" y="10" width="79" height="30" evaluationTime="Report" vTextAlign="Middle">
			<expression><![CDATA[" " + $V{PAGE_NUMBER}]]></expression>
		</element>
		<element kind="line" uuid="b50a57f2-b94f-46c9-8307-e79be15b5946" x="6" y="10" width="549" height="1"/>
	</pageFooter>
	<summary height="21" splitType="Stretch"/>
</jasperReport>
